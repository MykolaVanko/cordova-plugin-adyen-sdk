<!DOCTYPE html>
<html>
<head>
  <meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width">
  <link rel="stylesheet" type="text/css" href="css/index.css">
  <title>Adyen SDK</title>
</head>
<body>
<div class="app">
  <h1>Adyen SDK</h1>
  <div id="deviceready" class="blink">
    <p class="event listening">Connecting to Device</p>
    <p class="event received">Device is Ready</p>

    <h2>API</h2>
    <button ontouchstart="presentDropIn()">presentDropIn</button>
    <br/><br/>

  </div>
</div>
<script type="text/javascript" src="cordova.js"></script>
<script type="text/javascript" src="js/index.js"></script>
<script>
  function onSuccess(paymentMethod) {
    console.log("onSuccess, paymentMethod: " + JSON.stringify(paymentMethod));
    alert("OK, paymentMethod: " + paymentMethod.type);
  }

  function onError(msg) {
    console.log("Failed: " + msg);
  }

  function makePaymentDummy() {
    var returnAction = true;

    if (returnAction) {
      // note that this action is probably incorrect because of expired tokens and whatnot
      return {
        action: {
          'paymentData': 'Ab02b4c0!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',
          'paymentMethodType': 'scheme',
          'token': 'eyJ0aHJlZURTTWV0aG9kTm90aWZpY2F0aW9uVVJMIjoiaHR0cHM6XC9cL2NoZWNrb3V0c2hvcHBlci10ZXN0LmFkeWVuLmNvbVwvY2hlY2tvdXRzaG9wcGVyXC90aHJlZURTTWV0aG9kTm90aWZpY2F0aW9uLnNodG1sP29yaWdpbktleT1wdWIudjIuODAxNTkzMDc1MzMyMzEzMy5hSFIwY0hNNkx5OXpkR0YwYVdNdVptOXZaR3BwTG1sdi5pT3BNMVF3dy1jX1VHSUhtN3h0OExCcEVkVXM2MHliUnpqcWhLbXo1amJBIiwidGhyZWVEU01ldGhvZFVybCI6Imh0dHBzOlwvXC9wYWwtdGVzdC5hZHllbi5jb21cL3RocmVlZHMyc2ltdWxhdG9yXC9hY3NcL3N0YXJ0TWV0aG9kLnNodG1sIiwidGhyZWVEU1NlcnZlclRyYW5zSUQiOiI4NDQ4ODFjNi0zNTU2LTQ0ZmMtYjAyOS03OWU1MzI3M2RjYTMifQ==',
          'type': 'threeDS2Fingerprint'
        }
      }
    } else {
      return {};
    }
  }

  // AQEwhmfuXNWTK0Qc+iSWnWs8re22SZlGCIdaVGRVw1+mnE6ffj+3W/v4cQn4S2W/07UHEMFdWw2+5HzctViMSCJMYAc=-HeQs/TPsUh9586KSV6XYcw+pYhf8kqwq12Jr6eogpGA=-2X:3r%W(uhmZc<;5
  function presentDropIn() {
    if (window.Adyen) {
      var options = {
        paymentMethodsResponse: {"paymentMethods":[{"brands":["visa","mc","amex"],"details":[{"key":"encryptedCardNumber","type":"cardToken"},{"key":"encryptedSecurityCode","type":"cardToken"},{"key":"encryptedExpiryMonth","type":"cardToken"},{"key":"encryptedExpiryYear","type":"cardToken"},{"key":"holderName","optional":true,"type":"text"}],"name":"Kreditkarte","type":"scheme"},{"name":"Sofort.","supportsRecurring":true,"type":"directEbanking"},{"details":[{"key":"sepa.ownerName","type":"text"},{"key":"sepa.ibanNumber","type":"text"}],"name":"SEPA Lastschrift","supportsRecurring":true,"type":"sepadirectdebit"},{"name":"Rechnung mit Klarna.","supportsRecurring":true,"type":"klarna"},{"name":"Paysafecard","supportsRecurring":true,"type":"paysafecard"},{"details":[{"key":"bic","optional":true,"type":"text"}],"name":"GiroPay","supportsRecurring":true,"type":"giropay"},{"name":"Ratenkauf mit Klarna.","supportsRecurring":true,"type":"klarna_account"},{"details":[{"key":"applepay.token","type":"applePayToken"}],"name":"Apple Pay","supportsRecurring":true,"type":"applepay"},{"name":"Pay now with Klarna.","supportsRecurring":true,"type":"klarna_paynow"},{"details":[{"key":"paywithgoogle.token","type":"payWithGoogleToken"}],"name":"Google Pay","supportsRecurring":true,"type":"paywithgoogle"}]},
        environment: "test", // or "live", default "test"
        currencyCode: "EUR",
        amount: 123, // in minor units (cents)
        // note that this element is currently ignored
        paymentMethodsConfiguration: {
          card: {
            showStorePaymentField: false,
            holderNameRequired: true,
            publicKey: "10001|A5CC0B567192DE5B987C0001CD1DB28E10235333767600162D34BEA9796DA17DD1C8CAFE3AA56F3EC476F92467489982F4492E55AA483FBDEFD75EB23332E22107C058BA2EF124EBE33B47B8679C4DE65B422E606A4A22CD6E8B3BBED1DDF916553D8C15827FF01E333589482CE0F0BA98D2ACAAE2F6875117CBDDE1032F10A98464CEAFBBF146F41F160760651A2789C759CE460CB3B770D4721E6F11847C9FA448B1399D9BD12E0C6F02A985B8FDAD175F669D17AA8A5EA6584C725CB761227926F51D583FA857B9227437EBD9A933D526100825CEED0E9D642823669E6AB3C22EE5871C4DBCD0EF450449F97DB2C718A34FF94B74F76C51F507C7344123D9"
          },
          applepay: {
            amount: 0,
            currencyCode: 'EUR',
            countryCode: 'DE',
            configuration: {
              merchantName: 'foodji test merchant',
              merchantIdentifier: 'merchant.com.adyen.foodji.test'
            }
          },
          paywithgoogle: { // Example required configuration for Google Pay
            environment: "TEST", // Change this to PRODUCTION when you're ready to accept live Google Pay payments
            configuration: {
              gatewayMerchantId: "merchant.com.adyen.foodji.test", // Your Adyen merchant or company account name
            }
          }
        },

        onSubmit: function (state) {
          console.log("onSubmit, paymentMethods: " + JSON.stringify(state.data));
          // Your function calling your server to make the `/payments` request
          // (while this is processing, keep the drop-in open)

          // simulating a server call here
          var fakeServerResponse = makePaymentDummy(state.data);

          if (fakeServerResponse.action) {
            console.log("calling Adyen.handleAction with payload: " + JSON.stringify(fakeServerResponse.action));
            // If the server response wants us to invoke an action, pass that to the drop-in.
            // Note that the plugin will dismiss the drop-in control once the action has been handled by the user.
            Adyen.handleAction(fakeServerResponse.action);
          } else {
            console.log("All OK, closing the drop-in");
            Adyen.dismissDropIn();
          }
        },

        onAdditionalDetails: function (state) {
          console.log("onAdditionalDetails, state: " + JSON.stringify(state));
          // Call your server here, no need to invoke the plugin anymore
        }
      };

      Adyen.presentDropIn(options, onSuccess, onError);
    }
  }
</script>
</body>
</html>
